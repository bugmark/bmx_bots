#!/usr/bin/env bash

abort() {
  echo "Usage: all <github|test>"
  exit 1
}

[ "$#" == "0" ] && abort
[ "$1" == "github" ] || [ "$1" == "test" ] || abort

echo "----- BUGMARK-CLI TOTAL REBUILD TEST ---------------------"
echo "START `date`"
( echo Clear Old Data ; ./rebuild/clear         ) && 
( echo Load User Data ; ./rebuild/user_load     ) &&
( echo Load Test Repo ; ./rebuild/repo_load $1  ) &&
( echo Load OfferBU   ; ./rebuild/offer_load    ) &&
( echo Load Contracts ; ./rebuild/contract_load ) &&
( echo Counts         ; ./rebuild/count         ) &&
echo "DONE `date`"
